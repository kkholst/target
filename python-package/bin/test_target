#!/usr/bin/env python3
# encoding: utf-8
#
# Author: Klaus K. Holst
#
# target test program
#

import target.utils as ru
import numpy as np
import numpy.linalg as la
import argparse

def test(n=5):
    z = np.random.normal(0, size=n*n)
    z = np.resize(z, [n, n])
    x = np.matrix(z) + np.eye(n)
    y = np.matrix(ru.inv(x))
    print("x:\n", x, "\n")
    print("Inv(x):\n", y, "\n")
    print("Inv(x)-Inv2(x):\n", (y-la.inv(x)).round(5), "\n")
    print("X*Inv(x):\n", np.dot(x, y).round(5))


if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument("n",
                        type=int,
                        nargs='?',  # optional argument
                        default=5,
                        help="size of matrix")
    parser.add_argument("-a", "--all",
                        action="store_true",
                        help="run all tests")

    args = parser.parse_args()
    test(args.n)

#    if (args.all):
